# Short Title

Authenticate users on your chatbot with SMS one time passcode

# Long Title

Retrive confidential data of users through chatbot by authenticating users on chatbot with SMS one time passcode.


# Author
* [Manoj Jahgirdar](https://developer.ibm.com/profiles/manoj.jahgirdar/)
* [Muralidhar Chavan](https://developer.ibm.com/profiles/muralidhar.chavan/)
* [Manjula Hosurmath](https://developer.ibm.com/profiles/mhosurma/)

# URLs

### Github repo

- https://github.com/IBM/authenticate-users-on-your-chatbot-with-sms-otp.git

### Video Link

# Summary

In this code pattern you will learn to build a chatbot that authenticates users through an SMS one time passcode (OTP).

# Technologies

* [Artificial Intelligence](https://developer.ibm.com/technologies/artificial-intelligence/) 

* [Conversation](https://developer.ibm.com/technologies/conversation/)

* [Python](https://developer.ibm.com/technologies/python)

* [JavaScript](https://developer.ibm.com/technologies/javascript/)

* [Containers](https://developer.ibm.com/technologies/containers/)


# Description

Chatbots are prevalent everywhere. Some conversations are confidential and hence chatbots have to verify authenticity of users. Sending an OTP via SMS is a popular way to identify a user. 

In this code pattern you will learn to build a chatbot that authenticates users through an SMS one time passcode (OTP). For example, a customer holding an insurance policy can use chatbot to get more information about his/her insurance policy. You will also learn to use Watson Assistant, Cloud Functions and Custom APIs to build this application.

When you have completed this code pattern, you will understand how to:

* Build conversational interfaces into any application, device, or channel.
* Run your application code without servers.
* Build APIs to authenticate users on your chatbot.
* Make external API calls through Watson Assistant.

# Flow

<!--add an image in this path-->
![architecture](doc/source/images/architecture1.png)


1. User registers for a policy on the portal.
2. User data is stored in the database and policy details are sent to user’s phone number in an SMS through Twilio Messaging API.
3. User interacts with chatbot and asks for confidential info related to the policy. The user is prompted to enter OTP by Watson Assistant.
4. The query is sent to Watson Assistant which in turn invokes Cloud function to make an API call to the user defined backend API for retrieving info.
5. The user’s phone number is searched in the database and OTP generated by backend API is sent to user through Twilio.
6. User enters the OTP, in the chat application to authenticate himself/herself.
7. Watson Assistant validates OTP by interacting with backend API.
8. If the OTP is valid, the user requested confidential info is fetched from the database.
8. Cloud function returns the confidential info to Watson Assistant.
10. Watson Assistant displays the user requested confidential info.
11. User can see the confidential info in the Web UI.

# Instructions

> Find the detailed steps in the [README](https://github.com/IBM/authenticate-users-on-your-chatbot-with-sms-otp/blob/master/README.md) file.


1. Clone the repo
2. Setup Twilio messaging service
    - 2.1. Create Twilio service
    - 2.2. Create Twilio Trial Number
    - 2.3. Verified Caller IDs
3. Deploy Custom APIs
4. Create a Cloud Function Action
5. Create Watson Assistant Services
6. Import Watson Assistant workspace
7. Configure Watson Assistant with Cloud Function URL
8. Deploy and Run the Web Application

# Components and services

* [Red Hat OpenShift on IBM Cloud](https://developer.ibm.com/components/redhat-openshift-ibm-cloud/)

* [IBM Cloud Pak for Data](https://developer.ibm.com/components/cloud-pak-for-data/)

* [IBM Cloud](https://developer.ibm.com/components/cloud-ibm/)

* [IBM Cloud Functions](https://developer.ibm.com/components/ibm-cloud-functions/)

* [Cloud Foundry](https://developer.ibm.com/components/cloud-foundry/)

* [Watson Assistant](https://developer.ibm.com/components/watson-assistant/)

* [Watson APIs](https://developer.ibm.com/components/watson-apis/)

* [Docker](https://developer.ibm.com/components/docker/)